VIZWeb3D['Measure']=function(a,b,c){var d=this,e=new VIZWeb3D['EventDispatcher'](window,container);this['EventHandler']=e;var f=new THREE['Scene'](),g=new THREE['Scene'](),h=0xc8,i=-0xc8,j=0xc8,k=new THREE['OrthographicCamera'](-h,h,h,-h,i,j),l=a,m=0.1,n=0.1,o=null,p=0x2,q=0x5dc,r=0x14,s=[new THREE['Vector3'](),new THREE['Vector3'](),new THREE['Vector3'](),new THREE['Vector3']()],t=[new THREE['Vector3'](),new THREE['Vector3'](),new THREE['Vector3'](),new THREE['Vector3']()],u=[new THREE['Vector2'](),new THREE['Vector2'](),new THREE['Vector2'](),new THREE['Vector2']()],v=0x0,w={'r':0xff,'g':0xff,'b':0xff,'a':0x1},x={'r':0xff,'g':0x0,'b':0x0,'a':0x1},y={'r':0xff,'g':0x0,'b':0x0,'a':0x1},z={'r':0x0,'g':0xff,'b':0x0,'a':0x1},A={'r':0x0,'g':0xff,'b':0x0,'a':0x1},B={'r':0xff,'g':0x0,'b':0x0,'a':0x1},C={'r':0xff,'g':0x0,'b':0x0,'a':0x1},D=function(){var as={'id':l['Data']['UUIDv4'](),'type':REVIEW_TYPES['NONE'],'text':null,'points':[],'pointsBase':[],'color':{'colLine':null,'colPoint':null,'colPick':null,'colBack':null,'colBorder':null,'colText':null},'obj':{'markers':[],'line':null,'ellipse':null,'arrows':[],'supportlines':[],'center':null,'centerArc':null,'text':null}};return as;},E=new Map(),F=new THREE['Mesh'](new THREE['SphereGeometry'](p,0xa,0x14),new THREE['MeshBasicMaterial']({'color':new THREE['Color'](z['r']/0xff,z['g']/0xff,z['b']/0xff),'opacity':z['a']})),G=F['clone'](),H=F['clone'](),I=[F,G,H],J=new THREE['Object3D'](),K=new THREE['Object3D'](),L=new THREE['Object3D'](),M=new THREE['Object3D'](),N=new THREE['Object3D'](),O=new THREE['Geometry']();O['vertices']['push'](new THREE['Vector3']()),O['vertices']['push'](new THREE['Vector3']());var P=new THREE['LineBasicMaterial']({'color':new THREE['Color'](z['r']/0xff,z['g']/0xff,z['b']/0xff),'opacity':z['a']}),Q=new THREE['Line'](O,P),R=0.005,S=0x4,T=0x0,U,V,W;this['ReviewType']=REVIEW_TYPES['NONE'],this['SetSnapDistance']=function(as){},this['ReviewMode']=![],this['Start']=function(as){d['ReviewMode']=!![],M['visible']=!![],F['visible']=![],G['visible']=![],H['visible']=![],d['ReviewType']=as,X();if($('#ui_message')['length']>0x0){var at;switch(d['ReviewType']){case REVIEW_TYPES['RK_MEASURE_POS']:at='Measure\x20the\x20coordinates\x20of\x20a\x20particular\x20point.';break;case REVIEW_TYPES['RK_MEASURE_DISTANCE']:at='Measures\x20the\x20distance\x20between\x20two\x20points.';break;case REVIEW_TYPES['RK_MEASURE_ANGLE']:at='Calculate\x20the\x20angle\x20between\x20three\x20points.';break;default:break;}$('#ui_message_text')['html'](at+'<br><p2>*</p2><p1>Press\x20the</p1>\x20<p2>ESC</p2>\x20<p1>key\x20to\x20end\x20the\x20measurement.</p1>'),$('#ui_message')['fadeIn'](0x1f4);}},this['End']=function(){d['ReviewMode']=![],M['visible']=![],F['visible']=![],G['visible']=![],H['visible']=![],v!==0x0&&Z(),v=0x0,d['ReviewType']=REVIEW_TYPES['NONE'],$('#ui_message')['length']>0x0&&($('#ui_message_text')['html'](''),$('#ui_message')['hide']()),d['EventHandler']['dispatchEvent'](EVENT_TYPES['Control']['Changed']);},this['DeleteAll']=function(){Z();function as(at,au,av){if(at!==undefined){for(var aw=0x0;aw<at['obj']['markers']['length'];aw++)l['Data']['Dispose'](at['obj']['markers'][aw]);for(var aw=0x0;aw<at['obj']['arrows']['length'];aw++)l['Data']['Dispose'](at['obj']['arrows'][aw]);for(var aw=0x0;aw<at['obj']['supportlines']['length'];aw++)l['Data']['Dispose'](at['obj']['supportlines'][aw]);l['Data']['Dispose'](at['obj']['text']),l['Data']['Dispose'](at['obj']['line']);}}E['forEach'](as),E['clear'](),l['Render']();},this['SetOption']=function(as){if(as===undefined)as={};w=as['hasOwnProperty']('Color')?as['Color']['Line']:w,y=as['hasOwnProperty']('Color')?as['Color']['Point']:y,z=as['hasOwnProperty']('Color')?as['Color']['Pick']:z,A=as['hasOwnProperty']('Color')?as['Color']['Back']:A,B=as['hasOwnProperty']('Color')?as['Color']['Border']:B,C=as['hasOwnProperty']('Color')?as['Color']['Text']:C,F['material']=new THREE['MeshBasicMaterial']({'color':new THREE['Color'](z['r']/0xff,z['g']/0xff,z['b']/0xff),'opacity':z['a']}),G['material']=new THREE['MeshBasicMaterial']({'color':new THREE['Color'](z['r']/0xff,z['g']/0xff,z['b']/0xff),'opacity':z['a']}),H['material']=new THREE['MeshBasicMaterial']({'color':new THREE['Color'](z['r']/0xff,z['g']/0xff,z['b']/0xff),'opacity':z['a']});};function X(){U=D(),V=new THREE['Object3D'](),W=new THREE['Object3D']();}function Y(){U['color']['colLine']={'r':w['r'],'g':w['g'],'b':w['b'],'a':w['a']},U['color']['colPoint']={'r':y['r'],'g':y['g'],'b':y['b'],'a':y['a']},U['color']['colPick']={'r':z['r'],'g':z['g'],'b':z['b'],'a':z['a']},U['color']['colBack']={'r':A['r'],'g':A['g'],'b':A['b'],'a':A['a']},U['color']['colBorder']={'r':B['r'],'g':B['g'],'b':B['b'],'a':B['a']},U['color']['colText']={'r':C['r'],'g':C['g'],'b':C['b'],'a':C['a']};for(var as=0x0;as<s['length'];as++){U['points']['push'](new THREE['Vector3']()['copy'](s[as]));}for(var as=0x0;as<t['length'];as++){U['pointsBase']['push'](new THREE['Vector3']()['copy'](t[as]));}U['type']=d['ReviewType'],E['set'](U['id'],U);}function Z(){if(U!==undefined){for(var as=0x0;as<U['obj']['markers']['length'];as++)l['Data']['Dispose'](U['obj']['markers'][as]);for(var as=0x0;as<U['obj']['arrows']['length'];as++)l['Data']['Dispose'](U['obj']['arrows'][as]);for(var as=0x0;as<U['obj']['supportlines']['length'];as++)l['Data']['Dispose'](U['obj']['supportlines'][as]);l['Data']['Dispose'](U['obj']['text']),l['Data']['Dispose'](U['obj']['line']);}}a0();function a0(){f['matrixAutoUpdate']=![],f['add'](b),f['add'](J),M['add'](F),M['add'](G),M['add'](H),M['visible']=![],J['add'](M),J['add'](K),J['add'](N),g['add'](L),aj();}function a1(as,at){Q['geometry']['vertices'][0x0]['copy'](as),Q['geometry']['vertices'][0x1]['copy'](at),Q['geometry']['verticesNeedUpdate']=!![];}function a2(as,at,au){var av=new THREE['Mesh'](new THREE['SphereGeometry'](p,0x20,0x20),new THREE['MeshBasicMaterial']({'color':new THREE['Color'](y['r']/0xff,y['g']/0xff,y['b']/0xff),'opacity':y['a']}));av['position']['copy'](F['position']);var aw=av['clone']();aw['position']['copy'](G['position']),U['obj']['markers']=[av,aw],av['name']='marker',aw['name']='marker';var ax=new THREE['Geometry']();ax['vertices']['push'](new THREE['Vector3']()),ax['vertices']['push'](new THREE['Vector3']()),ax['vertices'][0x0]['copy'](as),ax['vertices'][0x1]['copy'](at),ax['verticesNeedUpdate']=!![];var ay=new THREE['LineBasicMaterial']({'color':new THREE['Color'](w['r']/0xff,w['g']/0xff,w['b']/0xff),'opacity':w['a']});U['obj']['line']=new THREE['Line'](ax,ay);var az=new THREE['Geometry']();az['vertices']['push'](new THREE['Vector3']()),az['vertices']['push'](new THREE['Vector3']()),az['vertices'][0x0]['copy'](s[0x1]),az['vertices'][0x1]['copy'](s[0x1]),az['verticesNeedUpdate']=!![];var aA=new THREE['Vector3']()['subVectors'](s[0x1],s[0x2]),aB=new THREE['Geometry']();aB['vertices']['push'](new THREE['Vector3']()),aB['vertices']['push'](new THREE['Vector3']()),aB['vertices'][0x0]['copy'](s[0x0]),aB['vertices'][0x1]['copy'](s[0x0]),aB['verticesNeedUpdate']=!![],U['obj']['supportlines']=[new THREE['Line'](az,ay),new THREE['Line'](aB,ay)];var aC=new THREE['Vector3']()['subVectors'](av['position'],aw['position'])['normalize'](),aD=new THREE['Vector3']()['subVectors'](aw['position'],av['position'])['normalize'](),aE=new THREE['CylinderBufferGeometry'](0x0,0.2,0.6,0xc,0x1,![]);aE['translate'](0x0,-0.3,0x0);var aF=new THREE['CylinderBufferGeometry'](0x0,0.2,0.6,0xc,0x1,![]);aF['translate'](0x0,-0.3,0x0);var aG=new THREE['MeshBasicMaterial']({'transparent':!![],'side':THREE['DoubleSide'],'opacity':x['a'],'color':new THREE['Color'](x['r']/0xff,x['g']/0xff,x['b']/0xff)}),aH=new THREE['Mesh'](aE,aG),aI=new THREE['Mesh'](aF,aG);a6(aH,aC),a6(aI,aD),aH['scale']['set'](r,r,r),aI['scale']['set'](r,r,r),aH['position']['copy'](av['position']),aI['position']['copy'](aw['position']),U['obj']['arrows']=[aH,aI],aH['name']='arrow',aI['name']='arrow';var aJ=ac(au,{'fontsize':0xc,'backgroundColor':A,'borderColor':B,'textColor':C});aJ['renderOrder']=0x3e7,U['text']=au;var aK=new THREE['Vector3']((av['position']['x']+aw['position']['x'])/0x2,(av['position']['y']+aw['position']['y'])/0x2,(av['position']['z']+aw['position']['z'])/0x2);U['obj']['center']=aK,U['obj']['text']=aJ,aJ['name']='marker',aJ['position']=aJ['position']['copy'](aK),aJ['scale']['set'](q,q,q),J['add'](U['obj']['markers'][0x0]),J['add'](U['obj']['markers'][0x1]),V['add'](U['obj']['arrows'][0x0]),V['add'](U['obj']['arrows'][0x1]),V['add'](U['obj']['line']),V['add'](U['obj']['supportlines'][0x0]),V['add'](U['obj']['supportlines'][0x1]),W=aJ,J['add'](V),L['add'](W);}function a3(as){var at=new THREE['Mesh'](new THREE['SphereGeometry'](p,0x20,0x20),new THREE['MeshBasicMaterial']({'color':new THREE['Color'](y['r']/0xff,y['g']/0xff,y['b']/0xff),'opacity':y['a']}));at['position']['copy'](F['position']),at['userData']=new THREE['Vector3']()['copy'](t[0x0]),U['obj']['markers']=[at],at['name']='marker';var au=new THREE['Geometry']();au['vertices']['push'](new THREE['Vector3']()),au['vertices']['push'](new THREE['Vector3']()),au['vertices'][0x0]['copy'](as),au['vertices'][0x1]['copy'](as),au['verticesNeedUpdate']=!![];var av=new THREE['LineBasicMaterial']({'color':new THREE['Color'](w['r']/0xff,w['g']/0xff,w['b']/0xff),'opacity':w['a']});U['obj']['line']=new THREE['Line'](au,av);var aw=new THREE['Vector3']()['subVectors'](at['position'],at['position'])['normalize'](),ax=new THREE['CylinderBufferGeometry'](0x0,0.2,0.6,0xc,0x1,![]);ax['translate'](0x0,-0.3,0x0);var ay=new THREE['MeshBasicMaterial']({'transparent':!![],'side':THREE['DoubleSide'],'opacity':x['a'],'color':new THREE['Color'](x['r']/0xff,x['g']/0xff,x['b']/0xff)}),az=new THREE['Mesh'](ax,ay);a6(az,aw),az['scale']['set'](r,r,r),az['position']['copy'](at['position']),az['userData']=new THREE['Vector3']()['copy'](t[0x0]),U['obj']['arrows']=[az],az['name']='arrow';var aA=ad(as,{'fontsize':0xc,'backgroundColor':A,'borderColor':B,'textColor':C});aA['renderOrder']=0x3e7;var aB=as['x']['toFixed'](l['Configuration']['Measure']['PositionalNumber']),aC=as['y']['toFixed'](l['Configuration']['Measure']['PositionalNumber']),aD=as['z']['toFixed'](l['Configuration']['Measure']['PositionalNumber']);U['text']='X\x20=\x20'+aB+'\x0d\x0a'+'Y\x20=\x20'+aC+'\x0d\x0a'+'Z\x20=\x20'+aD;var aE=new THREE['Vector3'](at['position']['x'],at['position']['y'],at['position']['z']);U['obj']['center']=aE,U['obj']['text']=aA,aA['name']='marker',aA['position']=aA['position']['copy'](aE),aA['scale']['set'](q,q,q),J['add'](U['obj']['markers'][0x0]),J['add'](U['obj']['arrows'][0x0]),V['add'](U['obj']['line']),J['add'](V),W=aA,L['add'](aA);}function a4(){var as=new THREE['LineBasicMaterial']({'color':new THREE['Color'](w['r']/0xff,w['g']/0xff,w['b']/0xff),'opacity':w['a']});if(v===0x1){var at=new THREE['Mesh'](new THREE['SphereGeometry'](p,0x20,0x20),new THREE['MeshBasicMaterial']({'color':new THREE['Color'](y['r']/0xff,y['g']/0xff,y['b']/0xff),'opacity':y['a']}));at['position']['copy'](F['position']),at['name']='marker',U['obj']['markers']['push'](at);var au=new THREE['Geometry']();au['vertices']['push'](new THREE['Vector3']()),au['vertices']['push'](new THREE['Vector3']()),au['vertices'][0x0]['copy'](s[0x0]),au['vertices'][0x1]['copy'](s[0x1]),au['verticesNeedUpdate']=!![],J['add'](U['obj']['markers'][0x0]),U['obj']['supportlines']['push'](new THREE['Line'](au,as)),V['add'](U['obj']['supportlines'][0x0]),J['add'](V);}if(v===0x2){var av=new THREE['Mesh'](new THREE['SphereGeometry'](p,0x20,0x20),new THREE['MeshBasicMaterial']({'color':new THREE['Color'](y['r']/0xff,y['g']/0xff,y['b']/0xff),'opacity':y['a']}));av['name']='marker',av['position']['copy'](G['position']),U['obj']['markers']['push'](av);var aw=new THREE['Geometry']();aw['vertices']['push'](new THREE['Vector3']()),aw['vertices']['push'](new THREE['Vector3']()),aw['vertices'][0x0]['copy'](s[0x0]),aw['vertices'][0x1]['copy'](s[0x1]),aw['verticesNeedUpdate']=!![],J['add'](U['obj']['markers'][0x1]),U['obj']['supportlines']['push'](new THREE['Line'](aw,as)),aw['vertices'][0x1]['copy'](s[0x2]),aw['verticesNeedUpdate']=!![],V['add'](U['obj']['supportlines'][0x1]);}if(v===0x3){var ax=new THREE['Mesh'](new THREE['SphereGeometry'](p,0x20,0x20),new THREE['MeshBasicMaterial']({'color':new THREE['Color'](y['r']/0xff,y['g']/0xff,y['b']/0xff),'opacity':y['a']}));ax['name']='marker',ax['position']['copy'](H['position']),U['obj']['markers']['push'](ax),J['add'](U['obj']['markers'][0x2]);var ay=new THREE['Vector3']()['subVectors'](F['position'],G['position'])['normalize'](),az=new THREE['Vector3']()['subVectors'](F['position'],H['position'])['normalize'](),aA=ay['dot'](az);aA=Math['acos'](aA);var aB=aA*(0xb4/Math['PI']),aC=aB['toFixed'](l['Configuration']['Measure']['PositionalNumber'])+'Â°',aD=ac(aC,{'fontsize':0xc,'backgroundColor':A,'borderColor':B,'textColor':C});aD['renderOrder']=0x3e7,U['text']=aC;var aE=a5(s[0x0],s[0x1],s[0x2],aB,![]);U['obj']['ellipse']=aE,V['add'](aE);var aF=new THREE['Vector3'](s[0x2]['x'],s[0x2]['y'],s[0x2]['z']);U['obj']['center']=aF,U['obj']['text']=aD,aD['name']='marker',aD['position']=aD['position']['copy'](aF),aD['scale']['set'](q,q,q);var aG=l['Control']['Model']['Center'](),aH=aG['project'](b),aI=new THREE['Vector3'](mouse['x'],mouse['y'],aH['z'])['unproject'](b);V['add'](U['obj']['arrows'][0x0]),V['add'](U['obj']['arrows'][0x1]),U['obj']['supportlines'][0x2]['geometry']['vertices'][0x1]['copy'](aD['position']),V['add'](U['obj']['supportlines'][0x2]),U['obj']['supportlines']['push'](aE),V['add'](U['obj']['supportlines'][0x3]),W=aD,L['add'](W);}}function a5(as,at,au,av,aw){var ax,ay,az;ax=new THREE['Vector3']()['subVectors'](at,as),ay=new THREE['Vector3']()['subVectors'](au,as),az=new THREE['Vector3']()['crossVectors'](ax,ay),ay=new THREE['Vector3']()['crossVectors'](ax,az),ax['normalize'](),ay['normalize']();var aA=new THREE['Vector3']()['subVectors'](at,as),aB=new THREE['Vector3']()['subVectors'](au,as),aC=Math['min'](aA['length'](),aB['length']())/0x3;aA['normalize'](),aB['normalize']();var aD=Math['acos'](aA['dot'](aB));aw&&(aD=(3.141592654*0x2-aD)*-0x1);var aE=[],aF=new THREE['Vector3'](),aG=new THREE['Vector3'](),aH=new THREE['Vector3'](),aI=new THREE['Vector3'](),aJ=new THREE['Vector3'](),aK=new THREE['Vector3']();for(var aL=0x0;aL<=0x3c;aL++){var aM=-(aL/0x3c)*aD,aN=new THREE['Vector3']()['copy'](ax)['multiplyScalar'](Math['cos'](aM))['multiplyScalar'](aC),aO=new THREE['Vector3']()['copy'](ay)['multiplyScalar'](Math['sin'](aM))['multiplyScalar'](aC),aP=new THREE['Vector3']()['addVectors'](aN,aO);if(aL===0x1e)aK['copy'](aP);aE['push'](aP['x'],aP['y'],aP['z']||0x0),aL===0x0&&aF['copy'](aP),aL===0x1&&(aH=new THREE['Vector3']()['subVectors'](aF,aP)['normalize']()),aL===0x3b&&aJ['copy'](aP),aL===0x3c&&(aG['copy'](aP),aI=new THREE['Vector3']()['subVectors'](aG,aJ)['normalize']());}var aQ=new THREE['BufferGeometry']();aQ['addAttribute']('position',new THREE['Float32BufferAttribute'](aE,0x3));var aR=new THREE['LineBasicMaterial']({'color':new THREE['Color'](w['r']/0xff,w['g']/0xff,w['b']/0xff),'opacity':w['a']}),aS=new THREE['Line'](aQ,aR);aS['position']['copy'](as);var aT=new THREE['CylinderBufferGeometry'](0x0,0.2,0.6,0xc,0x1,![]);aT['translate'](0x0,-0.3,0x0);var aU=new THREE['CylinderBufferGeometry'](0x0,0.2,0.6,0xc,0x1,![]);aU['translate'](0x0,-0.3,0x0);var aV=new THREE['MeshBasicMaterial']({'transparent':!![],'side':THREE['DoubleSide'],'opacity':x['a'],'color':new THREE['Color'](x['r']/0xff,x['g']/0xff,x['b']/0xff)}),aW=new THREE['Mesh'](aT,aV),aX=new THREE['Mesh'](aU,aV);a6(aW,aH),a6(aX,aI),aW['scale']['set'](r,r,r),aX['scale']['set'](r,r,r),aW['position']['copy'](new THREE['Vector3']()['addVectors'](as,aF)),aX['position']['copy'](new THREE['Vector3']()['addVectors'](as,aG)),U['obj']['arrows']=[aW,aX],aW['name']='arrow',aX['name']='arrow',aK['copy'](new THREE['Vector3']()['addVectors'](as,aK)),U['obj']['centerArc']=aK;var aY=new THREE['Geometry']();return aY['vertices']['push'](new THREE['Vector3']()),aY['vertices']['push'](new THREE['Vector3']()),aY['vertices'][0x0]['copy'](aK),aY['vertices'][0x1]['copy'](aK),aY['verticesNeedUpdate']=!![],U['obj']['supportlines']['push'](new THREE['Line'](aY,aR)),aY['verticesNeedUpdate']=!![],aS;}function a6(as,at){var au=new THREE['Vector3'](),av;if(at['y']>0.99999)as['quaternion']['set'](0x0,0x0,0x0,0x1);else at['y']<-0.99999?as['quaternion']['set'](0x1,0x0,0x0,0x0):(au['set'](at['z'],0x0,-at['x'])['normalize'](),av=Math['acos'](at['y']),as['quaternion']['setFromAxisAngle'](au,av));}function a7(){try{var as=function(at){var au=[],av=[];if(at['type']===REVIEW_TYPES['RK_MEASURE_POS']){for(var aw=0x0;aw<at['pointsBase']['length'];aw++){au['push'](new THREE['Vector3']()['copy'](ar(at['pointsBase'][aw]))),av['push'](new THREE['Vector3']()['copy'](at['pointsBase'][aw])['project'](b));}var ax=new THREE['Vector3']()['subVectors'](au[0x0],au[0x1])['normalize']();for(var aw=0x0;aw<at['obj']['markers']['length'];aw++){at['obj']['markers'][aw]['position']['copy'](au[aw]);}a6(at['obj']['arrows'][0x0],ax),at['obj']['arrows'][0x0]['position']['copy'](au[0x0]),at['obj']['line']['geometry']['vertices'][0x0]['copy'](au[0x0]),at['obj']['line']['geometry']['vertices'][0x1]['copy'](au[0x1]),at['obj']['line']['geometry']['verticesNeedUpdate']=!![],at['obj']['text']['position']['copy'](new THREE['Vector3']()['copy'](au[0x1]));}else{if(at['type']===REVIEW_TYPES['RK_MEASURE_DISTANCE']){for(var aw=0x0;aw<at['pointsBase']['length'];aw++){au['push'](new THREE['Vector3']()['copy'](ar(at['pointsBase'][aw]))),av['push'](new THREE['Vector3']()['copy'](at['pointsBase'][aw])['project'](b));}for(var aw=0x0;aw<at['obj']['markers']['length'];aw++){at['obj']['markers'][aw]['position']['copy'](au[aw]);}var ay=new THREE['Vector3']()['subVectors'](au[0x0],au[0x1])['normalize'](),az=new THREE['Vector3']()['subVectors'](au[0x1],au[0x0])['normalize'](),aA=new THREE['Vector3']()['subVectors'](au[0x1],au[0x2]);at['obj']['supportlines'][0x0]['geometry']['vertices'][0x0]['copy'](au[0x0]),at['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]['copy'](new THREE['Vector3']()['subVectors'](au[0x0],aA)),at['obj']['supportlines'][0x0]['geometry']['verticesNeedUpdate']=!![],at['obj']['supportlines'][0x1]['geometry']['vertices'][0x0]['copy'](au[0x1]),at['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]['copy'](new THREE['Vector3']()['subVectors'](au[0x1],aA)),at['obj']['supportlines'][0x1]['geometry']['verticesNeedUpdate']=!![],at['obj']['line']['geometry']['vertices'][0x0]['copy'](at['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]),at['obj']['line']['geometry']['vertices'][0x1]['copy'](at['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]),at['obj']['line']['geometry']['verticesNeedUpdate']=!![],a6(at['obj']['arrows'][0x0],ay),a6(at['obj']['arrows'][0x1],az),at['obj']['arrows'][0x0]['position']['copy'](at['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]),at['obj']['arrows'][0x1]['position']['copy'](at['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]);var aB=new THREE['Vector3']((at['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]['x']+at['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]['x'])/0x2,(at['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]['y']+at['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]['y'])/0x2,(at['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]['z']+at['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]['z'])/0x2);at['obj']['text']['position']['copy'](new THREE['Vector3']()['copy'](aB));}else{if(at['type']===REVIEW_TYPES['RK_MEASURE_ANGLE']){for(var aw=0x0;aw<at['pointsBase']['length'];aw++){au['push'](new THREE['Vector3']()['copy'](ar(at['pointsBase'][aw]))),av['push'](new THREE['Vector3']()['copy'](at['pointsBase'][aw])['project'](b));}for(var aw=0x0;aw<at['obj']['markers']['length'];aw++){at['obj']['markers'][aw]['position']['copy'](au[aw]);}var aC=new THREE['Vector3']()['subVectors'](au[0x0],au[0x1]),aD=new THREE['Vector3']()['subVectors'](au[0x0],au[0x2]);at['obj']['supportlines'][0x0]['geometry']['vertices'][0x0]['copy'](au[0x0]),at['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]['copy'](new THREE['Vector3']()['subVectors'](au[0x0],aC)),at['obj']['supportlines'][0x0]['geometry']['verticesNeedUpdate']=!![],at['obj']['supportlines'][0x1]['geometry']['vertices'][0x0]['copy'](au[0x0]),at['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]['copy'](new THREE['Vector3']()['subVectors'](au[0x0],aD)),at['obj']['supportlines'][0x1]['geometry']['verticesNeedUpdate']=!![];var aE,aF,aG;aE=new THREE['Vector3']()['subVectors'](au[0x1],au[0x0]),aF=new THREE['Vector3']()['subVectors'](au[0x2],au[0x0]),aG=new THREE['Vector3']()['crossVectors'](aE,aF),aF=new THREE['Vector3']()['crossVectors'](aE,aG),aE['normalize'](),aF['normalize']();var aH=new THREE['Vector3']()['subVectors'](au[0x1],au[0x0]),aI=new THREE['Vector3']()['subVectors'](au[0x2],au[0x0]),aJ=Math['min'](aH['length'](),aI['length']())/0x3;aH['normalize'](),aI['normalize']();var aK=Math['acos'](aH['dot'](aI)),aL=[],aM=new THREE['Vector3'](),aN=new THREE['Vector3'](),aO=new THREE['Vector3'](),aP=new THREE['Vector3'](),aQ=new THREE['Vector3'](),aR=new THREE['Vector3']();for(var aw=0x0;aw<=0x3c;aw++){var aS=-(aw/0x3c)*aK,aT=new THREE['Vector3']()['copy'](aE)['multiplyScalar'](Math['cos'](aS))['multiplyScalar'](aJ),aU=new THREE['Vector3']()['copy'](aF)['multiplyScalar'](Math['sin'](aS))['multiplyScalar'](aJ),aV=new THREE['Vector3']()['addVectors'](aT,aU);if(aw===0x1e)aR['copy'](aV);aL['push'](aV['x'],aV['y'],aV['z']||0x0),aw===0x0&&aM['copy'](aV),aw===0x1&&(aO=new THREE['Vector3']()['subVectors'](aM,aV)['normalize']()),aw===0x3b&&aQ['copy'](aV),aw===0x3c&&(aN['copy'](aV),aP=new THREE['Vector3']()['subVectors'](aN,aQ)['normalize']());}var aW=new THREE['BufferGeometry']();aW['addAttribute']('position',new THREE['Float32BufferAttribute'](aL,0x3)),at['obj']['ellipse']['geometry']=aW,at['obj']['ellipse']['position']['copy'](au[0x0]),a6(at['obj']['arrows'][0x0],aO),a6(at['obj']['arrows'][0x1],aP),at['obj']['arrows'][0x0]['position']['copy'](new THREE['Vector3']()['addVectors'](au[0x0],aM)),at['obj']['arrows'][0x1]['position']['copy'](new THREE['Vector3']()['addVectors'](au[0x0],aN)),aR['copy'](new THREE['Vector3']()['addVectors'](au[0x0],aR)),at['obj']['supportlines'][0x2]['geometry']['vertices'][0x0]['copy'](aR),at['obj']['supportlines'][0x2]['geometry']['vertices'][0x1]['copy'](au[0x3]),at['obj']['supportlines'][0x2]['geometry']['verticesNeedUpdate']=!![],at['obj']['text']['position']['copy'](new THREE['Vector3']()['copy'](au[0x3]));}}}};E['forEach'](as);}catch(at){console['log'](at);}}function a8(as,at){var au=new THREE['Vector3']()['copy'](as)['project'](b);au['y']-=at;var av=au['unproject'](k),aw=new THREE['Vector3']();return aw['subVectors'](as,av),aw['length']();}function a9(as,at,au,av,aw){var ax=this,ay=new THREE['Vector2']();ay['set'](av['x'],av['y']);for(var az=0x0;az<as['children']['length'];az++){if(as['children'][az]instanceof THREE['Mesh'])for(var aA=0x0;aA<as['children'][az]['userData']['length'];aA++){var aB=as['children'][az]['userData'][aA],aC=aB['BBox'],aD=new THREE['Vector3']((aC['max']['x']+aC['min']['x'])/0x2,(aC['max']['y']+aC['min']['y'])/0x2,(aC['max']['z']+aC['min']['z'])/0x2),aE=new THREE['Vector3'](ay['x'],ay['y'],0.3),aF=new THREE['Vector3'](ay['x'],ay['y'],0.7),aG=aE['unproject'](ax['camera']),aH=aF['unproject'](ax['camera']),aI=new THREE['Vector3']();aI['subVectors'](aD,aG);var aJ=new THREE['Vector3']();aJ['subVectors'](aD,aH);var aK=new THREE['Vector3']();aK['crossVectors'](aI,aJ);var aL=new THREE['Vector3']();aL['subVectors'](aG,aH);var aM=aK['length']()/aL['length'](),aN=new THREE['Vector3'](aC['max']['x']-aC['min']['x'],aC['max']['y']-aC['min']['y'],aC['max']['z']-aC['min']['z'])['length']();aN/=1.9;if(aM<aN){aw['push'](as['children'][az]);break;}}else a9(as['children'][az],at,au,av,aw);}}function aa(as){var at=l['Data']['GetMousePos'](as),au=[];o=l['Clipping']['GetClipInfo'](),a9(objModel,as['x'],as['y'],at,au);if(b['isPerspectiveCamera']){var av=new THREE['Vector3'](at['x'],at['y'],0.5);av=av['unproject'](b);var aw=av['sub'](b['position'])['normalize']();raycaster=new THREE['Raycaster'](b['position'],aw);}else{var ax=new THREE['Vector3'](at['x'],at['y'],-0x1);ax=ax['unproject'](b);var ay=new THREE['Vector3'](0x0,0x0,-0x1)['transformDirection'](b['matrixWorld']);raycaster=new THREE['Raycaster'](),raycaster['set'](ax,ay);}if(au['length']>0x0){var az=raycaster['intersectObjects'](au,!![]);if(az['length']>0x0){for(var aA=az['length']-0x1;aA>=0x0;aA--){var aB=![];if(o['enable']!==null||o['enable']!==![]){if(o['type']===CLIPPING_MODES['X']){if(o['inverse']===![]){if(az[aA]['point']['x']>=o['value'])aB=!![];}else{if(az[aA]['point']['x']<=o['value']*-0x1)aB=!![];}}if(o['type']===CLIPPING_MODES['Y']){if(o['inverse']===![]){if(az[aA]['point']['y']>=o['value'])aB=!![];}else{if(az[aA]['point']['y']<=o['value']*-0x1)aB=!![];}}if(o['type']===CLIPPING_MODES['Z']){if(o['inverse']===![]){if(az[aA]['point']['z']>=o['value'])aB=!![];}else{if(az[aA]['point']['z']<=o['value']*-0x1)aB=!![];}}}if(aB)az['splice'](aA,0x1);}return az;}else return[];}else return[];}function ab(as,at){at=at||'Hg';var au=$('<span>'+at+'</span>')['css']({'font':as}),av=$('<div\x20style=\x22display:\x20inline-block;\x20width:\x201px;\x20height:\x200px;\x22></div>'),aw=$('<div></div>');aw['append'](au,av);var ax=$('body');ax['append'](aw);try{var ay={};av['css']({'verticalAlign':'baseline'}),ay['ascent']=av['offset']()['top']-au['offset']()['top'],av['css']({'verticalAlign':'bottom'}),ay['height']=av['offset']()['top']-au['offset']()['top'],ay['descent']=ay['height']-ay['ascent'];}finally{aw['remove']();}return ay;};function ac(as,at){if(at===undefined)at={};var au=at['hasOwnProperty']('fontface')?at['fontface']:'Arial',av=at['hasOwnProperty']('fontsize')?at['fontsize']:0x12,aw=at['hasOwnProperty']('borderThickness')?at['borderThickness']:0x0,ax=at['hasOwnProperty']('borderColor')?at['borderColor']:{'r':0x0,'g':0x0,'b':0x0,'a':0x1},ay=at['hasOwnProperty']('backgroundColor')?at['backgroundColor']:{'r':0xff,'g':0xff,'b':0xff,'a':0x1},az=at['hasOwnProperty']('textColor')?at['textColor']:{'r':0x0,'g':0x0,'b':0x0,'a':0x1},aA=document['createElement']('canvas');aA['width']=0x800,aA['height']=0x800;var aB=aA['getContext']('2d');aB['font']=av+'pt\x20'+au;var aC=aB['measureText'](as),aD=ab(aB['font'],as);aB['width']=aC['width'],aB['height']=aD['height'],aB['fillStyle']='rgba('+ay['r']+','+ay['g']+','+ay['b']+','+ay['a']+')',aB['strokeStyle']='rgba('+ax['r']+','+ax['g']+','+ax['b']+','+ax['a']+')',aB['lineWidth']=aw;var aE=(aA['width']-aC['width'])/0x2,aF=(aA['height']-aD['height'])/0x2+aD['height']/0x2,aG=0xa;ae(aB,aw/0x2+aE-aG+0x1,aF-aD['height'],aB['width']+aG*0x2,aB['height']+aG+aG/0x2,0x0),aB['fillStyle']='rgba('+az['r']+','+az['g']+','+az['b']+','+az['a']+')',aB['fillText'](as,aw/0x2+aE,aw/0x2+aF+aG/0x2);var aH=new THREE['CanvasTexture'](aA);aH['needsUpdate']=!![];var aI=new THREE['SpriteMaterial']({'map':aH,'side':THREE['DoubleSide']}),aJ=new THREE['Sprite'](aI);return aJ;}function ad(as,at){var au=as['x']['toFixed'](l['Configuration']['Measure']['PositionalNumber']),av=as['y']['toFixed'](l['Configuration']['Measure']['PositionalNumber']),aw=as['z']['toFixed'](l['Configuration']['Measure']['PositionalNumber']);if(at===undefined)at={};var ax=at['hasOwnProperty']('fontface')?at['fontface']:'Arial',ay=at['hasOwnProperty']('fontsize')?at['fontsize']:0x12,az=at['hasOwnProperty']('borderThickness')?at['borderThickness']:0x0,aA=at['hasOwnProperty']('borderColor')?at['borderColor']:{'r':0x0,'g':0x0,'b':0x0,'a':0x1},aB=at['hasOwnProperty']('backgroundColor')?at['backgroundColor']:{'r':0xff,'g':0xff,'b':0xff,'a':0x1},aC=at['hasOwnProperty']('textColor')?at['textColor']:{'r':0x0,'g':0x0,'b':0x0,'a':0x1},aD=document['createElement']('canvas');aD['width']=0x800,aD['height']=0x800;var aE=aD['getContext']('2d');aE['font']=ay+'pt\x20'+ax;var aF=[aE['measureText'](au),aE['measureText'](av),aE['measureText'](aw)],aG=aE['measureText']('X\x20=\x20'),aH;for(var aI=0x0;aI<aF['length'];aI++){if(aI===0x0)aH=aF[aI];else{if(aH['width']<aF[aI]['width'])aH=aF[aI];}}var aJ=ab(aE['font'],au);aE['width']=aH['width']+aG['width'],aE['height']=aJ['height']*0x3,aE['fillStyle']='rgba('+aB['r']+','+aB['g']+','+aB['b']+','+aB['a']+')',aE['strokeStyle']='rgba('+aA['r']+','+aA['g']+','+aA['b']+','+aA['a']+')',aE['lineWidth']=az;var aK=(aD['width']-aH['width'])/0x2,aL=(aD['height']-aJ['height'])/0x2+aJ['height']/0x2,aM=0xa;ae(aE,az/0x2+aK-aM+0x1,aL-aJ['height'],aE['width']+aM*0x2,aE['height']+aM+aM/0x2,0x0),aE['textAlign']='right',aE['fillStyle']='rgba('+aC['r']+','+aC['g']+','+aC['b']+','+aC['a']+')',aE['fillText'](au,az/0x2+aK+aE['width'],az/0x2+aL+aM/0x2),aE['fillText']('X\x20=\x20',az/0x2+aK+aG['width'],az/0x2+aL+aM/0x2),aE['fillText'](av,az/0x2+aK+aE['width'],az/0x2+aL+aJ['height']+aM/0x2),aE['fillText']('Y\x20=\x20',az/0x2+aK+aG['width'],az/0x2+aL+aJ['height']+aM/0x2),aE['fillText'](aw,az/0x2+aK+aE['width'],az/0x2+aL+aJ['height']*0x2+aM/0x2),aE['fillText']('Z\x20=\x20',az/0x2+aK+aG['width'],az/0x2+aL+aJ['height']*0x2+aM/0x2);var aN=new THREE['CanvasTexture'](aD);aN['needsUpdate']=!![];var aO=new THREE['SpriteMaterial']({'map':aN,'side':THREE['DoubleSide']}),aP=new THREE['Sprite'](aO);return aP;}function ae(as,at,au,av,aw,ax){as['beginPath'](),as['moveTo'](at+ax,au),as['lineTo'](at+av-ax,au),as['quadraticCurveTo'](at+av,au,at+av,au+ax),as['lineTo'](at+av,au+aw-ax),as['quadraticCurveTo'](at+av,au+aw,at+av-ax,au+aw),as['lineTo'](at+ax,au+aw),as['quadraticCurveTo'](at,au+aw,at,au+aw-ax),as['lineTo'](at,au+ax),as['quadraticCurveTo'](at,au,at+ax,au),as['closePath'](),as['fill'](),as['stroke']();}function af(as){var at;if(l['Configuration']['Measure']['Unit']===MEASURE_UNIT['mm'])at=as['toFixed'](l['Configuration']['Measure']['PositionalNumber']);else{if(l['Configuration']['Measure']['Unit']===MEASURE_UNIT['cm'])at=(as/0xa)['toFixed'](l['Configuration']['Measure']['PositionalNumber']);else{if(l['Configuration']['Measure']['Unit']===MEASURE_UNIT['inch'])at=(as/2.54)['toFixed'](l['Configuration']['Measure']['PositionalNumber']);}}return at+'\x20'+l['Configuration']['Measure']['Unit'];}function ag(as,at){callback=function(au){if(au instanceof THREE['Mesh']){s=au['geometry']['attributes']['position']['array'],test=au['worldToLocal'](at['clone']());for(var av=0x0,aw=s['length'];av<aw;av++){var ax=ah(s[av]);N['add'](ax);}}},callback(as);}function ah(as){var at=new THREE['SpriteMaterial']({'color':0xffffff});return sprite=new THREE['Sprite'](at),sprite['name']='snap',sprite['scale']['set'](0x5,0x5,0x1),sprite['position']['copy'](as),sprite;}var ai=0x2710;function aj(){sphereHelper=new THREE['Line'](new THREE['SphereGeometry'](0x1),new THREE['LineBasicMaterial']({'color':0xffff00})),sphereHelper['visible']=![],sphereHelper['name']='marker',N['add'](sphereHelper);}function ak(as){if(v<0x2){var at=l['Picking']['PickInfo'](as),au=null;if(at['length']>0x0){if(v===0x0)F['visible']=!![];if(v===0x1)G['visible']=!![];t[v]['copy'](at[0x0]['point']),s[v]['copy'](ar(at[0x0]['point'])),I[v]['position']['copy'](ar(at[0x0]['point']));var av=0x0,aw=at[av];if(aw){var ax=aw['face'],ay=aw['point'],az=aw['object'];au=d['findClosestVertex'](az,ay,n);}au?(t[v]['copy'](au),s[v]['copy'](ar(au)),I[v]['position']['copy'](ar(au)),I[v]['material']['color']=new THREE['Color'](0x1,0x0,0x0)):I[v]['material']['color']=new THREE['Color'](z['r']/0xff,z['g']/0xff,z['b']/0xff);}else{if(v===0x0)F['visible']=![];v===0x1&&(F['visible']=!![],G['visible']=![]);}d['EventHandler']['dispatchEvent'](EVENT_TYPES['Control']['Changed']);}else{var aA=l['Data']['GetMousePos'](as),aB=new THREE['Vector3']()['copy'](t[0x1])['project'](b);t[0x2]=new THREE['Vector3'](aA['x'],aA['y'],aB['z'])['unproject'](b);var aC=[];for(var aD=0x0;aD<t['length'];aD++){aC['push'](new THREE['Vector3']()['copy'](ar(t[aD])));}var aE=new THREE['Vector3']()['subVectors'](aC[0x1],aC[0x2]);U['obj']['supportlines'][0x0]['geometry']['vertices'][0x0]['copy'](aC[0x0]),U['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]['copy'](new THREE['Vector3']()['subVectors'](aC[0x0],aE)),U['obj']['supportlines'][0x0]['geometry']['verticesNeedUpdate']=!![],U['obj']['supportlines'][0x1]['geometry']['vertices'][0x0]['copy'](aC[0x1]),U['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]['copy'](new THREE['Vector3']()['subVectors'](aC[0x1],aE)),U['obj']['supportlines'][0x1]['geometry']['verticesNeedUpdate']=!![],U['obj']['line']['geometry']['vertices'][0x0]['copy'](U['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]),U['obj']['line']['geometry']['vertices'][0x1]['copy'](U['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]),U['obj']['line']['geometry']['verticesNeedUpdate']=!![],U['obj']['arrows'][0x0]['position']['copy'](U['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]),U['obj']['arrows'][0x1]['position']['copy'](U['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]);var aF=new THREE['Vector3']((U['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]['x']+U['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]['x'])/0x2,(U['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]['y']+U['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]['y'])/0x2,(U['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]['z']+U['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]['z'])/0x2);W['position']['copy'](new THREE['Vector3']()['copy'](aF)),d['EventHandler']['dispatchEvent'](EVENT_TYPES['Control']['Changed']);}}function al(as){var at=l['Picking']['PickInfo'](as);if(v<0x2){if(d['ReviewType']===REVIEW_TYPES['RK_MEASURE_DISTANCE']){if(at['length']>0x0){var au=0x0,av=at[au];if(av){var aw=av['face'],ax=av['point'],ay=av['object'];snap=d['findClosestVertex'](ay,ax,n);}snap?(t[v]['copy'](snap),s[v]['copy'](ar(snap)),I[v]['position']['copy'](ar(snap)),I[v]['material']['color']=new THREE['Color'](0x1,0x0,0x0)):(t[v]['copy'](at[0x0]['point']),s[v]['copy'](ar(at[0x0]['point'])),I[v]['position']['copy'](ar(at[0x0]['point'])),I[v]['material']['color']=new THREE['Color'](0x0,0x1,0x0));var az=l['Data']['GetMousePos'](as);u[v]['copy'](az),v++;if(v>0x1){var aA=s[0x0]['distanceTo'](s[0x1]);a1(s[0x0],s[0x1]);var aB=new THREE['Vector3'](az['x'],az['y'],-0x1)['unproject'](b);aB['z']=s[0x1]['z'],s[0x2]['copy'](aB),a2(s[0x0],s[0x1],af(aA));}}}}else{var az=l['Data']['GetMousePos'](as);u[0x2]['copy'](az),v=0x0,Y(),X();}}function am(as){if(v<0x1){var at=l['Picking']['PickInfo'](as),au=null;if(at['length']>0x0){if(v===0x0)F['visible']=!![];t[v]['copy'](at[0x0]['point']),s[v]['copy'](ar(at[0x0]['point'])),I[v]['position']['copy'](ar(at[0x0]['point']));var av=0x0,aw=at[av];if(aw){var ax=aw['face'],ay=aw['point'],az=aw['object'];au=d['findClosestVertex'](az,ay,n);}au?(t[v]['copy'](au),s[v]['copy'](ar(au)),I[v]['position']['copy'](ar(au)),I[v]['material']['color']=new THREE['Color'](0x1,0x0,0x0)):I[v]['material']['color']=new THREE['Color'](z['r']/0xff,z['g']/0xff,z['b']/0xff);}else{if(v===0x0)F['visible']=![];v===0x1&&(F['visible']=!![],G['visible']=![]);}d['EventHandler']['dispatchEvent'](EVENT_TYPES['Control']['Changed']);}else{var aA=l['Data']['GetMousePos'](as),aB=new THREE['Vector3']()['copy'](t[0x0])['project'](b);t[0x1]=new THREE['Vector3'](aA['x'],aA['y'],aB['z'])['unproject'](b);var aC=[];for(var aD=0x0;aD<t['length'];aD++){aC['push'](new THREE['Vector3']()['copy'](ar(t[aD])));}U['obj']['line']['geometry']['vertices'][0x0]['copy'](aC[0x0]),U['obj']['line']['geometry']['vertices'][0x1]['copy'](aC[0x1]),U['obj']['line']['geometry']['verticesNeedUpdate']=!![];var aE=new THREE['Vector3']()['subVectors'](aC[0x0],aC[0x1])['normalize']();a6(U['obj']['arrows'][0x0],aE),W['position']['copy'](new THREE['Vector3']()['copy'](aC[0x1])),d['EventHandler']['dispatchEvent'](EVENT_TYPES['Control']['Changed']);}}function an(as){var at=l['Picking']['PickInfo'](as);if(v<0x1){if(at['length']>0x0){var au=0x0,av=at[au];if(av){var aw=av['face'],ax=av['point'],ay=av['object'];snap=d['findClosestVertex'](ay,ax,n);}snap?(t[v]['copy'](snap),s[v]['copy'](ar(snap)),I[v]['position']['copy'](ar(snap)),I[v]['material']['color']=new THREE['Color'](0x1,0x0,0x0)):(t[v]['copy'](at[0x0]['point']),s[v]['copy'](ar(at[0x0]['point'])),I[v]['position']['copy'](ar(at[0x0]['point'])),I[v]['material']['color']=new THREE['Color'](0x0,0x1,0x0));a1(at[0x0]['point'],at[0x0]['point']);var az=l['Data']['GetMousePos'](as);u[v]['copy'](az),v++,v>0x0&&a3(s[0x0]);}}else{var az=l['Data']['GetMousePos'](as);u[0x2]['copy'](az),v=0x0,Y(),X();}}function ao(as){if(v<0x3){var at=l['Picking']['PickInfo'](as),au=null;if(at['length']>0x0){if(v===0x0)F['visible']=!![];if(v===0x1)G['visible']=!![];if(v===0x2)H['visible']=!![];t[v]['copy'](at[0x0]['point']),s[v]['copy'](ar(at[0x0]['point'])),I[v]['position']['copy'](ar(at[0x0]['point']));var av=0x0,aw=at[av];if(aw){var ax=aw['face'],ay=aw['point'],az=aw['object'];au=d['findClosestVertex'](az,ay,n);}au?(t[v]['copy'](au),s[v]['copy'](ar(au)),I[v]['position']['copy'](ar(au)),I[v]['material']['color']=new THREE['Color'](0x1,0x0,0x0),v===0x1&&(U['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]['copy'](I[v]['position']),U['obj']['supportlines'][0x0]['geometry']['verticesNeedUpdate']=!![]),v===0x2&&(U['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]['copy'](I[v]['position']),U['obj']['supportlines'][0x1]['geometry']['verticesNeedUpdate']=!![])):(I[v]['material']['color']=new THREE['Color'](z['r']/0xff,z['g']/0xff,z['b']/0xff),v===0x1&&(U['obj']['supportlines'][0x0]['geometry']['vertices'][0x1]['copy'](I[v]['position']),U['obj']['supportlines'][0x0]['geometry']['verticesNeedUpdate']=!![]),v===0x2&&(U['obj']['supportlines'][0x1]['geometry']['vertices'][0x1]['copy'](I[v]['position']),U['obj']['supportlines'][0x1]['geometry']['verticesNeedUpdate']=!![]));}else{if(v===0x0)F['visible']=![];v===0x1&&(F['visible']=!![],G['visible']=![]),v===0x2&&(F['visible']=!![],G['visible']=!![],H['visible']=![]);}d['EventHandler']['dispatchEvent'](EVENT_TYPES['Control']['Changed']);}else{var aA=l['Data']['GetMousePos'](as),aB=new THREE['Vector3']()['copy'](t[0x0])['project'](b);t[0x3]=new THREE['Vector3'](aA['x'],aA['y'],aB['z'])['unproject'](b);var aC=[];for(var aD=0x0;aD<t['length'];aD++){aC['push'](new THREE['Vector3']()['copy'](ar(t[aD])));}U['obj']['supportlines'][0x2]['geometry']['vertices'][0x1]['copy'](aC[0x3]),U['obj']['supportlines'][0x2]['geometry']['verticesNeedUpdate']=!![],W['position']['copy'](new THREE['Vector3']()['copy'](aC[0x3])),d['EventHandler']['dispatchEvent'](EVENT_TYPES['Control']['Changed']),F['visible']=![],G['visible']=![],H['visible']=![];}}function ap(as){var at=l['Picking']['PickInfo'](as);if(v<0x3){if(at['length']>0x0){var au=0x0,av=at[au];if(av){var aw=av['face'],ax=av['point'],ay=av['object'];snap=d['findClosestVertex'](ay,ax,n);}snap?(t[v]['copy'](snap),s[v]['copy'](ar(snap)),I[v]['position']['copy'](ar(snap)),I[v]['material']['color']=new THREE['Color'](0x1,0x0,0x0)):(t[v]['copy'](at[0x0]['point']),s[v]['copy'](ar(at[0x0]['point'])),I[v]['position']['copy'](ar(at[0x0]['point'])),I[v]['material']['color']=new THREE['Color'](0x0,0x1,0x0));a1(at[0x0]['point'],at[0x0]['point']);var az=l['Data']['GetMousePos'](as);u[v]['copy'](az),v++;if(v===0x1){var aA=s[0x0]['distanceTo'](s[0x1]),aB=new THREE['Vector3'](az['x'],az['y'],s[0x0]['z'])['unproject'](k);s[0x1]['copy'](aB),a4();}else{if(v===0x2){var aA=s[0x0]['distanceTo'](s[0x2]),aB=new THREE['Vector3'](az['x'],az['y'],s[0x0]['z'])['unproject'](k);s[0x2]['copy'](aB),a4();}else v===0x3&&a4();}}}else{var az=l['Data']['GetMousePos'](as);u[0x2]['copy'](az),v=0x0,Y(),X();}}function aq(as){var at=as['width'],au=as['height'];at/=0x2,au/=0x2,k['left']=-at,k['right']=at,k['top']=au,k['bottom']=-au,k['updateProjectionMatrix']();}function ar(as){var at=new THREE['Vector3']()['copy'](as)['project'](b),au=at['unproject'](k);return au;}this['findClosestVertex']=function(as,at,au){var av=as['geometry']['attributes']['position']['array'],aw=[];for(var ax=0x0;ax<av['length'];ax=ax+0x3){var ay=new THREE['Vector3'](av[ax],av[ax+0x1],av[ax+0x2]);aw['push'](ay);}if(aw['length']===0x0)return null;var az,aA=null,aB=as['worldToLocal'](at['clone']());for(var ax=0x0,aC=aw['length'];ax<aC;ax++){az=aw[ax]['distanceTo'](aB);if(az>au)continue;au=az,aA=aw[ax];}if(aA===null)return null;return as['localToWorld'](aA);},this['onMouseDown']=function(as){var at;as=as||window['event'];if('which'in as)at=as['which']===0x3;else{if('button'in as)at=as['button']===0x2;}if(at)return;if(d['ReviewType']===REVIEW_TYPES['RK_MEASURE_DISTANCE'])al(as);else{if(d['ReviewType']===REVIEW_TYPES['RK_MEASURE_POS'])an(as);else d['ReviewType']===REVIEW_TYPES['RK_MEASURE_ANGLE']&&ap(as);}},this['onMouseMove']=function(as){if(d['ReviewType']===REVIEW_TYPES['RK_MEASURE_DISTANCE'])ak(as);else{if(d['ReviewType']===REVIEW_TYPES['RK_MEASURE_POS'])am(as);else d['ReviewType']===REVIEW_TYPES['RK_MEASURE_ANGLE']&&ao(as);}},this['Render']=function(){c['autoClear']=![];var as=l['Container']['getBoundingClientRect']();c['setViewport'](0x0,0x0,as['width'],as['height']),aq(as),m=a8(new THREE['Vector3'](),n),a7(),c['clearDepth'](),c['render'](f,k),c['clearDepth'](),c['render'](g,k);};};