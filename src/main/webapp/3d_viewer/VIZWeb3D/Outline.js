VIZWeb3D['Outline']=function(a,b,c){var d=this;this['renderScene']=null,this['renderSceneBase']=null,this['renderCamera']=null,this['renderer']=c,this['object']=null,this['datamng']=b,this['map']=null,this['drawMap']=new Map(),this['useAlpha']=![],this['resolution']=a!==undefined?new THREE['Vector2'](a['x'],a['y']):new THREE['Vector2'](0x100,0x100),this['oldClearColor']=new THREE['Color'](),this['oldClearAlpha']=0x1,this['width']=0x0,this['height']=0x0,this['downSampleRatio']=0x1;var e={'minFilter':THREE['LinearFilter'],'magFilter':THREE['LinearFilter'],'format':THREE['RGBAFormat']},f=Math['round'](this['resolution']['x']/this['downSampleRatio']),g=Math['round'](this['resolution']['y']/this['downSampleRatio']);this['renderTargetDepthBuffer']=new THREE['WebGLRenderTarget'](this['resolution']['x'],this['resolution']['y'],e),this['renderTargetDepthBuffer']['texture']['name']='OutlinePass.depth',this['renderTargetDepthBuffer']['texture']['generateMipmaps']=![],this['renderTargetEdgeBuffer1']=new THREE['WebGLRenderTarget'](this['resolution']['x'],this['resolution']['y'],e),this['renderTargetEdgeBuffer1']['texture']['name']='OutlinePass.edge1',this['renderTargetEdgeBuffer1']['texture']['generateMipmaps']=![],this['fsQuad']=new VIZWeb3D['FullScreenQuad'](null),this['setSize']=function(h,i){this['width']=h,this['height']=i;var j=Math['round'](h/this['downSampleRatio']),k=Math['round'](i/this['downSampleRatio']);this['renderTargetEdgeBuffer1']['setSize'](j,k),j=Math['round'](j/0x2),k=Math['round'](k/0x2);},this['addData']=function(h,i,j,k,l){var m={'type':h,'scene':i,'camera':j,'object':k,'base':l};this['drawMap']['set'](m['type'],m);},this['render']=function(h){var i=this['drawMap']['get'](h);if(i!==undefined){this['renderScene']=i['scene'],this['renderCamera']=i['camera'],this['object']=i['object'],this['renderSceneBase']=i['base'],this['map']=this['datamng']['OutlineMap'];if(h===0x0)this['render_selection']();else{if(h===0x1)this['render_edge']();else{if(h===0x2)this['render_hidden']();}}}},this['render_selection']=function(){if(this['object']!==undefined){this['oldClearColor']['copy'](this['renderer']['getClearColor']()),this['oldClearAlpha']=this['renderer']['getClearAlpha']();var h=this['renderer']['autoClear'];c['autoClear']=![];var i=[];this['map']['forEach'](function(m,n,o){d['renderScene']['add'](m['mesh']);});var j=function(m,n,o,p){function q(r,s,t){r['material']=o,r['material']['needsUpdate']=!![];for(var u=0x0;u<r['userData']['length'];u++){var v=r['userData'][u];if(!v['Tag']['Select']){if(n)r['geometry']['index']['array']['set'](v['Tag']['Outline']['Base'],v['m_triIdx']);else r['geometry']['index']['array']['set'](v['Tag']['Outline']['New'],v['m_triIdx']);r['geometry']['index']['needsUpdate']=!![];}}}p['forEach'](q);};this['datamng']['SetSelectionOutline'](this['object'],![],this['datamng']['Materials']['outline_basic']),c['setRenderTarget'](this['renderTargetDepthBuffer']),c['clear'](),c['render'](this['renderScene'],this['renderCamera'],this['renderTargetDepthBuffer'],!![]),this['fsQuad']['material']=this['datamng']['Materials']['outline_select'],this['fsQuad']['material']['uniforms']['maskTexture']['value']=this['renderTargetDepthBuffer']['texture'],this['fsQuad']['material']['uniforms']['texSize']['value']=new THREE['Vector2'](this['width'],this['height']);var k=this['datamng']['GetEdgeColor']();this['fsQuad']['material']['uniforms']['edgeColor']['value']=new THREE['Vector3'](k['r'],k['g'],k['b']),this['fsQuad']['material']['uniforms']['edgeAlpha']['value']=k['a'],c['setRenderTarget'](this['renderTargetEdgeBuffer1']),c['clear'](),this['fsQuad']['render'](c);if(this['useAlpha']){var l=this['datamng']['Materials']['basic']['uniforms']['mode']['value'];this['datamng']['Materials']['basic']['uniforms']['mode']['value']=0x0,this['datamng']['Materials']['basic']['uniforms']['useAlpha']['value']=0x1,this['datamng']['Materials']['basic']['uniforms']['alpha']['value']=0.2,this['datamng']['UpdateSelectionObjectMaterial'](this['datamng']['Materials']['basic']),this['datamng']['SetBasicShaderDepthTest'](!![]),c['render'](this['renderScene'],this['renderCamera']),this['datamng']['Materials']['basic']['uniforms']['mode']['value']=l;}else{var l=this['datamng']['Materials']['basic']['uniforms']['mode']['value'];this['datamng']['Materials']['basic']['uniforms']['mode']['value']=0x0,this['datamng']['Materials']['basic']['uniforms']['useAlpha']['value']=0x0,this['datamng']['Materials']['basic']['uniforms']['alpha']['value']=0x1,this['datamng']['UpdateSelectionObjectMaterial'](this['datamng']['Materials']['basic']),this['datamng']['SetBasicShaderDepthTest'](!![]),c['render'](this['renderScene'],this['renderCamera']),this['datamng']['Materials']['basic']['uniforms']['mode']['value']=l;}this['datamng']['SetSelectionOutline'](this['object'],!![],this['datamng']['Materials']['basic']),this['map']['forEach'](function(m,n,o){m['parent']['add'](m['mesh']);});}},this['render_edge']=function(){if(this['object']!==undefined){this['oldClearColor']['copy'](this['renderer']['getClearColor']()),this['oldClearAlpha']=this['renderer']['getClearAlpha']();var h=this['renderer']['autoClear'];c['autoClear']=![];var i={'r':0x0,'g':0x0,'b':0x1,'a':0x1},j={'r':0x0,'g':0x0,'b':0x0,'a':0x0},k={'r':0x0,'g':0x0,'b':0xff,'a':0x1},l=function(o){var p=0xa;if(o['b']+p<=0xff)o['b']+=p;else o['g']+p<=0xff?(o['g']+=p,o['b']=0x0):(o['r']+=p,o['g']=0x0,o['b']=0x0);},m=function(o,p,q,r){for(var s=0x0;s<o['children']['length'];s++){if(o['children'][s]instanceof THREE['Mesh']){o['children'][s]['material']=q,o['children'][s]['material']['needsUpdate']=!![];for(var t=0x0;t<o['children'][s]['userData']['length'];t++){var u=o['children'][s]['userData'][t],v=function(w,x,y){for(var z=x['m_vnIdx']/0x3*0x4;z<x['m_vnIdx']/0x3*0x4+x['m_nVtx']+x['m_nVtx']/0x3;z=z+0x4){w['geometry']['attributes']['color']['array'][z]=y['r'],w['geometry']['attributes']['color']['array'][z+0x1]=y['g'],w['geometry']['attributes']['color']['array'][z+0x2]=y['b'],w['geometry']['attributes']['color']['array'][z+0x3]=y['a']*0xff;}w['geometry']['attributes']['color']['needsUpdate']=!![],l(y);};if(!p)v(o['children'][s],u,r);else v(o['children'][s],u,r);}}else m(o['children'][s],p,q,r);}};m(this['object'],![],this['datamng']['Materials']['hiddenline_basic'],i),c['autoClearDepth']=![];{this['datamng']['Materials']['hiddenline_basic']['depthTest']=!![],this['datamng']['Materials']['hiddenline_basic']['depthWrite']=!![],c['setRenderTarget'](this['renderTargetDepthBuffer']),c['clear'](),c['render'](this['renderScene'],this['renderCamera'],this['renderTargetDepthBuffer'],!![]),this['fsQuad']['material']=this['datamng']['Materials']['outline_edge'],this['fsQuad']['material']['uniforms']['maskTexture']['value']=this['renderTargetDepthBuffer']['texture'],this['fsQuad']['material']['uniforms']['texSize']['value']=new THREE['Vector2'](this['width'],this['height']);var n=this['datamng']['GetHiddenEdgeColor']();this['fsQuad']['material']['uniforms']['edgeColor']['value']=new THREE['Vector3'](n['r'],n['g'],n['b']),this['fsQuad']['material']['uniforms']['edgeAlpha']['value']=0.5,c['setRenderTarget'](this['renderTargetEdgeBuffer1']),c['clear'](),this['fsQuad']['render'](c);}this['datamng']['UpdateObjectStatus'](this['object'],![],!![],!![],this['datamng']['Materials']['basic'],j),this['datamng']['Materials']['hiddenline_basic']['depthTest']=![],this['datamng']['Materials']['hiddenline_basic']['depthWrite']=![],c['autoClearDepth']=![];}},this['GetPickInfo']=function(h){var i=this['drawMap']['get'](0x5);i!==undefined&&(this['renderScene']=i['scene'],this['renderCamera']=i['camera'],this['object']=i['object'],this['renderSceneBase']=i['base'],this['map']=this['datamng']['OutlineMap'],c['setViewport'](0x0,0x0,a['x'],a['y']));var j=d['datamng']['GetMousePos'](h);if(this['object']!==undefined){this['oldClearColor']['copy'](this['renderer']['getClearColor']()),this['oldClearAlpha']=this['renderer']['getClearAlpha']();var k=this['renderer']['autoClear'];c['autoClear']=!![];var l={'r':0x0,'g':0x0,'b':0x1,'a':0x1},m={'r':0x0,'g':0x0,'b':0x0,'a':0x0},n={'r':0x0,'g':0x0,'b':0xff,'a':0x1},o=function(E){var F=0xa;if(E['b']+F<=0xff)E['b']+=F;else E['g']+F<=0xff?(E['g']+=F,E['b']=0x0):(E['r']+=F,E['g']=0x0,E['b']=0x0);},p=function(E,F,G,H){for(var I=0x0;I<E['children']['length'];I++){if(E['children'][I]instanceof THREE['Mesh']){E['children'][I]['material']=G,E['children'][I]['material']['needsUpdate']=!![];for(var J=0x0;J<E['children'][I]['userData']['length'];J++){var K=E['children'][I]['userData'][J],L=function(M,N,O){for(var P=N['m_vnIdx']/0x3*0x4;P<N['m_vnIdx']/0x3*0x4+N['m_nVtx']+N['m_nVtx']/0x3;P=P+0x4){M['geometry']['attributes']['color']['array'][P]=O['r'],M['geometry']['attributes']['color']['array'][P+0x1]=O['g'],M['geometry']['attributes']['color']['array'][P+0x2]=O['b'],M['geometry']['attributes']['color']['array'][P+0x3]=O['a']*0xff;}M['geometry']['attributes']['color']['needsUpdate']=!![],o(O);};if(!F)L(E['children'][I],K,H);else L(E['children'][I],K,H);}}else p(E['children'][I],F,G,H);}};p(this['object'],![],this['datamng']['Materials']['hiddenline_basic'],l),c['autoClearDepth']=!![];{c['render'](this['renderScene'],this['renderCamera']);var q=new Image();q['src']=c['domElement']['toDataURL'](),q['style']['height']='100%',q['style']['width']='100%',q['style']['objectfit']='contain';var s=document['createElement']('canvas');s['width']=a['x'],s['height']=a['y'];var t=s['getContext']('2d');t['drawImage'](q,0x0,0x0);var u=t['getImageData'](0x0,0x0,a['x'],a['y']),v=window['open']('','');v['document']['title']='Snapshot';var x=v['document']['createElement']('div');x['style']['position']='absolute',x['style']['width']='100%',x['style']['height']='100%',x['style']['top']=0x0,x['style']['left']=0x0,x['style']['margin']=0x0,x['appendChild'](q),v['document']['body']['appendChild'](x);var y=(h['clientY']*q['width']+h['clientX'])*0x4,z=u['data'][y+0x0],A=u['data'][y+0x1],B=u['data'][y+0x2],C=u['data'][y+0x3];console['log']('R\x20:\x20'+z+'\x20G\x20:\x20\x20'+A+'\x20B\x20:\x20'+B);var D=function(E,F){return(E%F+F)%F;};}this['datamng']['Materials']['hiddenline_basic']['depthTest']=![],this['datamng']['Materials']['hiddenline_basic']['depthWrite']=![],c['autoClearDepth']=![];}};},VIZWeb3D['FullScreenQuad']=function(){var a=new THREE['OrthographicCamera'](-0x1,0x1,0x1,-0x1,0x0,0x1),b=new THREE['PlaneBufferGeometry'](0x2,0x2),c=function(d){this['_mesh']=new THREE['Mesh'](b,d);};return Object['defineProperty'](c['prototype'],'material',{'get':function(){return this['_mesh']['material'];},'set':function(d){this['_mesh']['material']=d;}}),Object['assign'](c['prototype'],{'render':function(d){d['render'](this['_mesh'],a);}}),c;}();