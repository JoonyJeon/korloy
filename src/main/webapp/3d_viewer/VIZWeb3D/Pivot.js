VIZWeb3D['Pivot']=function(a,b,c,d,e){var f=this,g=new VIZWeb3D['EventDispatcher'](window,a);this['EventHandler']=g,this['container']=a,this['scene']=new THREE['Scene'](),this['camera']=c,this['control']=e,this['renderer']=d;var h=null;this['sphere']=null,this['sphere1']=null,this['sphere2']=null,this['sphere3']=null,this['sphere4']=null,this['sphere5']=null,this['DrawRender']=![];var i=0x0,j=0x0;this['Option']={get 'Visible'(){return h['visible'];},set 'Visible'(s){h['visible']=s;}},k();function k(){controls['addEventListener']('change',n),controls['addEventListener']('start',o),controls['addEventListener']('end',p),a['addEventListener']('mouseup',q,![]),l();}function l(){h=new THREE['Object3D'](),h['visible']=![],f['scene']['add'](h);var s=new THREE['SphereGeometry'](0x5a,0x20,0x20),t=new THREE['MeshPhongMaterial']({'color':0xff5050,'side':THREE['DoubleSide'],'transparent':!![],'vertexColors':THREE['NoColors']});sphere=new THREE['Mesh'](s,t),sphere['renderOrder']=0x1,sphere['onBeforeRender']=function(C){C['clearDepth']();},h['add'](sphere),s=new THREE['SphereGeometry'](0x78,0x20,0x20,0x0,Math['PI']*0x2,0x0,0.3),t=new THREE['MeshPhongMaterial']({'color':0xffffff,'side':THREE['DoubleSide'],'transparent':!![],'vertexColors':THREE['NoColors'],'opacity':0.6}),sphere1=new THREE['Mesh'](s,t),sphere1['renderOrder']=0x1,h['add'](sphere1),s=new THREE['SphereGeometry'](0x78,0x20,0x20,0x0,Math['PI']*0x2,Math['PI']/0x5*0x2,0.3),sphere2=new THREE['Mesh'](s,t),sphere2['renderOrder']=0x1,h['add'](sphere2),s=new THREE['SphereGeometry'](0x78,0x20,0x20,0x0,Math['PI']*0x2,Math['PI']/0x5*0x3,0.3),sphere3=new THREE['Mesh'](s,t),sphere3['renderOrder']=0x1,h['add'](sphere3),s=new THREE['SphereGeometry'](0x78,0x20,0x20,0x0,Math['PI']*0x2,Math['PI']/0x5*0x4,0.3),sphere4=new THREE['Mesh'](s,t),sphere4['renderOrder']=0x1,h['add'](sphere4),s=new THREE['SphereGeometry'](0x78,0x20,0x20,0x0,Math['PI']*0x2,Math['PI']/0x5*-1.5,0.3),sphere5=new THREE['Mesh'](s,t),sphere5['renderOrder']=0x1,h['add'](sphere5);var u=new THREE['AmbientLight'](0xaaaaaa);f['scene']['add'](u),h['visible']=![];var v=new THREE['Vector3'](0x0,0x0,0x0),w=new THREE['Vector3'](0x0,0x0,0x1),x=new THREE['Vector3'](0.1,0.1,0.1),y=new THREE['Vector3']()['subVectors'](w,v);y['applyAxisAngle'](x,0x1e/0xb4*3.141592),y['applyAxisAngle'](w,0xa/0xb4*3.141592);var z=y;light1=new THREE['DirectionalLight'](0xffffff,0x1);var A=new THREE['Vector3'](z['x'],z['y'],z['z']);light1['position']['copy'](A),f['scene']['add'](light1);var B=new THREE['Vector3'](-z['x'],-z['y'],-z['z']);light2=new THREE['DirectionalLight'](0xeeeeee,0x1),light2['position']['copy'](B),f['scene']['add'](light2);}this['update']=function(){controls['PivotProcess']===0x1?controls['WheelDown']?h['visible']=!![]:h['visible']=![]:h['visible']=!![];h['position']['copy'](f['control']['Pivot']),f['renderer']['autoClear']=![];var s=f['container']['getBoundingClientRect']();d['setViewport'](0x0,0x0,s['width'],s['height']);var t=0.015,u=m(h['position'],t);if(j!==u){var v=u/0x3c;h['scale']['set'](v,v,v);}else j=u;d['render'](f['scene'],f['camera']),h['visible']=![];};function m(s,t){var u=new THREE['Vector3']()['copy'](s)['project'](f['camera']);u['y']-=t;var w=u['unproject'](f['camera']),x=new THREE['Vector3']();return x['subVectors'](s,w),x['length']();}function n(){f['DrawRender']=!![],i++,r();}function o(){f['DrawRender']=!![],i++,r();}function p(){i++,r();}function q(s){}function r(){var s=this;this['nLongTabTimer']=setTimeout(function(){i--,i===0x0&&(f['DrawRender']=![],f['EventHandler']['dispatchEvent'](EVENT_TYPES['Pivot']['DrawRender']),delete s['nLongTabTimer']);},0x7d0);}};